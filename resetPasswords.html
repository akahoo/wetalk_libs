<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>重置密码- WeTalk.ICU - 寻找志同道合的TA</title>
		<link rel="stylesheet" type="text/css" href="./css/reset.css" />
		<link rel="stylesheet" href="./css/resetPasswords.css">
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="./js/server.js"></script>
	</head>
	<body>
		<div class="header">
			<div>
				<img src="img/course.png">
				<p>
					<a href="index.html" style="margin-right: 60px;">首页</a>
					<a href="course.html" style="margin-right: 60px;">帮助</a>
					<a href="register.html">注册</a>
				</p>
			</div>
		</div>
		<div class="content" id="content">
			<div>
				<p class="title">重置密码</p>
				<p class="text">输入密码</p>
				<input type="password" id="password" placeholder='请输入5-20位的密码' maxlength="20" />
				<p class="text">请再次输入密码</p>
				<input type="password" id="confirm" />
				<p class="btn"><button type="button" onclick="sub()">提交</button></p>
			</div>
		</div>
		<div class="footer">
			<p>© 2020 htttps://www.wetalk.icu All Rights Reserved.</p>
		</div>
		<div style="display:none">
		<script type="text/javascript" src="https://s4.cnzz.com/z_stat.php?id=1279425279&web_id=1279425279"></script>
		</div>
	</body>
</html>
<script type="text/javascript">
	function getQueryVariable(variable) {
		var query = window.location.search.substring(1);
		var vars = query.split("&");
		for (var i = 0; i < vars.length; i++) {
			var pair = vars[i].split("=");
			if (pair[0] == variable) {
				return pair[1];
			}
		}
		return (false);
	}

	function sub() {
		let code = ""
		if (getQueryVariable("code") == false) {
			code = ""
		} else {
			code = getQueryVariable("code")
		}
		let password = document.getElementById("password").value
		let confirm = document.getElementById("confirm").value
		if (password !== confirm) {
			alert("两次输入的密码不同");
		} else if (password == "" || confirm == "") {
			alert("请输入密码或确定密码");
		} else if (password.length < 5) {
			alert("密码格式错误");
		} else {
			console.log(1)
			resetPassword(code, password).then(res => {
				console.log(res)
				if (res.code == 44444) {
					alert(res.message)
				} else if (res.code) {
					alert("修改密码成功")
				}
			})
		}
	}
</script>
